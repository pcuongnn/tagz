$.fn.productAutocomplete=function(t){"use strict";t=t||{};var e="undefined"!=typeof t.multiple?t.multiple:!0;this.select2({minimumInputLength:3,multiple:e,initSelection:function(t,n){$.get(Spree.routes.product_search,{ids:t.val().split(","),token:Spree.api_key},function(t){n(e?t.products:t.products[0])})},ajax:{url:Spree.routes.product_search,datatype:"json",data:function(t,e){return{q:{name_cont:t,sku_cont:t},m:"OR",token:Spree.api_key}},results:function(t,e){var n=t.products?t.products:[];return{results:n}}},formatResult:function(t){return t.name},formatSelection:function(t){return t.name}})},$(document).ready(function(){$(".product_picker").productAutocomplete()});